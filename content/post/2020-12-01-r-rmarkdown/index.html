---
title: "US Non-residential Construction Contractors by Trade"
author: "Dhruv Hirani"
date: 2020-12-01T21:13:14-05:00
categories: ["R"]
tags: ["R Markdown", "plot", "regression"]
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<div id="r-markdown" class="section level1">
<h1>R Markdown</h1>
<p>This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <a href="http://rmarkdown.rstudio.com" class="uri">http://rmarkdown.rstudio.com</a>.</p>
<p>You can embed an R code chunk like this:</p>
<pre class="r"><code>
# library(fredr)
library(dplyr)
## Warning: package &#39;dplyr&#39; was built under R version 4.0.5
## 
## Attaching package: &#39;dplyr&#39;
## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag
## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union
library(purrr)
## Warning: package &#39;purrr&#39; was built under R version 4.0.5
library(devtools)
## Warning: package &#39;devtools&#39; was built under R version 4.0.5
## Loading required package: usethis
## Warning: package &#39;usethis&#39; was built under R version 4.0.5
# install_github(&quot;mikeasilva/blsAPI&quot;)
library(blsAPI)
library(rjson)


payload &lt;- list( &#39;seriesid&#39; = c( &quot;PCU236400236400&quot;
                              , &quot;PCU2364002364001&quot;
                              , &quot;PCU23640023640011&quot;
                              , &quot;PCU23640023640012&quot;
                              , &quot;PCU23640023640013&quot;
                              , &quot;PCU23640023640014&quot;
                              , &quot;PCU236400236400221&quot;
                              , &quot;PCU2364002364002211&quot;
                              , &quot;PCU2364002364002212&quot;
                              , &quot;PCU2364002364002213&quot;
                              , &quot;PCU2364002364002214&quot;
                              , &quot;PCU236400236400222&quot;
                              , &quot;PCU2364002364002221&quot;
                              , &quot;PCU2364002364002222&quot;
                              , &quot;PCU2364002364002223&quot;
                              , &quot;PCU2364002364002224&quot;
                              , &quot;PCU236400236400223&quot;
                              , &quot;PCU2364002364002231&quot;
                              , &quot;PCU2364002364002232&quot;
                              , &quot;PCU2364002364002233&quot;
                              , &quot;PCU2364002364002234&quot;
                              , &quot;PCU236400236400224&quot;
                              , &quot;PCU2364002364002241&quot;
                              , &quot;PCU2364002364002242&quot;
                              , &quot;PCU2364002364002243&quot;
                              , &quot;PCU2364002364002244&quot;
                              )
              , &#39;startyear&#39; = 2010
              , &#39;endyear&#39; = 2030
              , &#39;registrationKey&#39; = &#39;4a8550fc62c4439e9629d8143ec319ec&#39;
            )



response &lt;- blsAPI(payload, 2, return_data_frame = TRUE)


# ## Process results - JSON Method
# apiDF &lt;- function(data){
#   df &lt;- data.frame(year=character(),
#                    period=character(),
#                    periodName=character(),
#                    value=character(),
#                    stringsAsFactors=FALSE)
#   
#   i &lt;- 0
#   for(d in data){
#     i &lt;- i + 1
#     df[i,] &lt;- unlist(d)
#   }
#   return(df)
# }

# json &lt;- fromJSON(response)
# nrb_all &lt;- apiDF(json$Results$series[[1]]$data)
# nrb_gc &lt;- apiDF(json$Results$series[[2]]$data)
# nrb_gc_ne &lt;- apiDF(json$Results$series[[3]]$data)
# nrb_gc_s &lt;- apiDF(json$Results$series[[4]]$data)
# nrb_gc_mw &lt;- apiDF(json$Results$series[[5]]$data)
# nrb_gc_w &lt;- apiDF(json$Results$series[[6]]$data)
# nrb_mp &lt;- apiDF(json$Results$series[[7]]$data)
# nrb_mp_ne &lt;- apiDF(json$Results$series[[8]]$data)
# nrb_mp_s &lt;- apiDF(json$Results$series[[9]]$data)
# nrb_mp_mw &lt;- apiDF(json$Results$series[[10]]$data)
# nrb_mp_w &lt;- apiDF(json$Results$series[[11]]$data)
# nrb_el &lt;- apiDF(json$Results$series[[12]]$data)
# nrb_el_ne &lt;- apiDF(json$Results$series[[13]]$data)
# nrb_el_s &lt;- apiDF(json$Results$series[[14]]$data)
# nrb_el_mw &lt;- apiDF(json$Results$series[[15]]$data)
# nrb_el_w &lt;- apiDF(json$Results$series[[16]]$data)
# nrb_roof &lt;- apiDF(json$Results$series[[17]]$data)
# nrb_roof_ne &lt;- apiDF(json$Results$series[[18]]$data)
# nrb_roof_s &lt;- apiDF(json$Results$series[[19]]$data)
# nrb_roof_mw &lt;- apiDF(json$Results$series[[20]]$data)
# nrb_roof_w &lt;- apiDF(json$Results$series[[21]]$data)
# nrb_cs &lt;- apiDF(json$Results$series[[22]]$data)
# nrb_cs_ne &lt;- apiDF(json$Results$series[[23]]$data)
# nrb_cs_s &lt;- apiDF(json$Results$series[[24]]$data)
# nrb_cs_mw &lt;- apiDF(json$Results$series[[25]]$data)
# nrb_cs_w &lt;- apiDF(json$Results$series[[25]]$data)
</code></pre>
</div>
<div id="including-plots" class="section level1">
<h1>Including Plots</h1>
<p>You can also embed plots. See Figure <a href="#fig:pie">1</a> for example:</p>
<pre class="r"><code>par(mar = c(0, 1, 0, 1))
pie(
  c(280, 60, 20),
  c(&#39;Sky&#39;, &#39;Sunny side of pyramid&#39;, &#39;Shady side of pyramid&#39;),
  col = c(&#39;#0292D8&#39;, &#39;#F7EA39&#39;, &#39;#C4B632&#39;),
  init.angle = -50, border = NA
)</code></pre>
<div class="figure"><span style="display:block;" id="fig:pie"></span>
<img src="{{< blogdown/postref >}}index_files/figure-html/pie-1.png" alt="A fancy pie chart." width="672" />
<p class="caption">
Figure 1: A fancy pie chart.
</p>
</div>
</div>
